<h1>投稿詳細画面</h1>

<img src = "<%= "user/images/#{@user.image_name}" %>">
<!--ユーザーのトプ画表示-->
<%= link_to(@user.name, "/users/#{@user.id}") %>
<!--ユーザー詳細ページへのリンク-->

<%= @post.content %>
<%= @post.created_at %>


<% if @post.user_id ==  @current_user.id %>
  <%= link_to("編集", "/posts/#{@post.id}/edit") %>
  <%= link_to("削除", "/posts/#{@post.id}/destroy", {method:"post"}) %>
<% end %>
<!--他のユーザーの投稿を編集、削除できないようにする-->



<div class="comment-wrapper border-top　mb-10">
  <p class="mt-5">コメント一覧</p>
  <% @comments.each do |comment| %>
    <div>
      <% unless comment.user.blank? %>
        <%= link_to(comment.user.name, "/users/#{comment.user.id}") %>
      <% end %>
      <%= comment.user.name unless comment.user.blank? %>
      <br />
      <%= comment.content %>
    </div>
    <br />
  <% end %>

  <%= form_with(model: [@comment], local: true) do |f| %>
  <%= f.hidden_field "post_id", value: @post.id %>
  
    <%= f.text_area :content, class: "form-control", rows: 3 %>
    <%= button_tag type: "submit", class: "btn btn-danger float-right mt-1" do %>
      <i class="far fa-comments"></i> コメントする
    <% end %>
  <% end %>
 
</div>